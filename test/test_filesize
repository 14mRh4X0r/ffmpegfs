#!/bin/bash

. "${BASH_SOURCE%/*}/funcs.sh" "$1"

# Ensure log contains file sizes, predicted and actual
cat "$DIRNAME/obama.$DESTTYPE" > /dev/null
cat "$DIRNAME/raven.$DESTTYPE" > /dev/null

if [ "$DESTTYPE" == "mp4" ];
then
# mp4

echo Checking $DIRNAME/obama.mp4
SIZE=$(stat -c %s "$DIRNAME/obama.mp4")
echo Size: $SIZE
[ $SIZE -ge 99151 -a $SIZE -le 99676 ]
echo "Pass"

echo Checking $DIRNAME/raven.mp4
SIZE=$(stat -c %s "$DIRNAME/raven.mp4")
echo Size: $SIZE
[ $SIZE -ge 133661 -a $SIZE -le 133669 ]
echo "Pass"

elif [ "$DESTTYPE" == "mp3" ];
then
# mp3

echo Checking $DIRNAME/obama.mp3
SIZE=$(stat -c %s "$DIRNAME/obama.mp3")
echo Size: $SIZE
[ $SIZE -eq 97244 ]
echo "Pass"

echo Checking $DIRNAME/raven.mp3
SIZE=$(stat -c %s "$DIRNAME/raven.mp3")
echo Size: $SIZE
[ $SIZE -eq 126456 ]
echo "Pass"

elif [ "$DESTTYPE" == "wav" ];
then
# wav

echo Checking $DIRNAME/obama.wav
SIZE=$(stat -c %s "$DIRNAME/obama.wav")
echo Size: $SIZE
[ $SIZE -eq 1058636 ]
echo "Pass"

echo Checking $DIRNAME/raven.wav
SIZE=$(stat -c %s "$DIRNAME/raven.wav")
echo Size: $SIZE
[ $SIZE -eq 3699406 ]
echo "Pass"

elif [ "$DESTTYPE" == "ogg" ];
then
# ogg

echo Checking $DIRNAME/obama.ogg
SIZE=$(stat -c %s "$DIRNAME/obama.ogg")
echo Size: $SIZE
[ $SIZE -eq 65633 ]
echo "Pass"

echo Checking $DIRNAME/raven.ogg
SIZE=$(stat -c %s "$DIRNAME/raven.ogg")
echo Size: $SIZE
[ $SIZE -eq 141211 ]
echo "Pass"

else
echo "Internal error, unknown type $DESTTYPE. Fix script!"
exit 99
fi
