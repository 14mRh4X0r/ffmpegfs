<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpegfs Fuse Multi Media Filesystem: Installation Instructions for FFmpegfs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpegfs Fuse Multi Media Filesystem
   &#160;<span id="projectnumber">1.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Installation Instructions for FFmpegfs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Copyright (C) 2017-2019 Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) This file was originally copyright (C) 2013-2014 K. Henriksson.</p>
<p>It can be distributed under the terms of the GFDL 1.3 or later. See <a class="el" href="README_8md_source.html">README.md</a> for more information.</p>
<h2>Prerequisites </h2>
<p>FFmpegfs uses FFmpeg lib for decoding/encoding. It requires the following libraries:</p>
<ul>
<li>gcc and g++ compilers</li>
<li>fuse (&gt;= 2.6.0)</li>
<li>sqlite3 (&gt;= 3.7.13)</li>
<li>libavutil (&gt;= 54.3.0)</li>
<li>libavcodec (&gt;= 56.1.0)</li>
<li>libavformat (&gt;= 56.1.0)</li>
<li>libavfilter (&gt;= 5.40.0)</li>
<li>libavresample (&gt;= 2.1.0)</li>
<li>libswscale (&gt;= 3.0.0)</li>
<li>libswresample (&gt;= 1.0.0)</li>
</ul>
<p>For optional DVD support you need the following libraries</p>
<ul>
<li>libdvdread (&gt;= 5.0.0)</li>
<li>libdvdnav (&gt;= 5.0.0)</li>
</ul>
<p>For optional Bluray support you need the following library</p>
<ul>
<li>libbluray (&gt;= 0.6.2)</li>
</ul>
<p>If building from git, you'll also need:</p>
<ul>
<li>autoconf</li>
<li>automake</li>
<li>asciidoc</li>
<li>xmllint</li>
<li>w3m</li>
</ul>
<p>The commands to install just the first prerequisites follow.</p>
<p>Please read the "Supported Linux Distributions" chapter in <a class="el" href="README_8md_source.html">README.md</a> for details.</p>
<p><b>On Debian:</b> </p><pre class="fragment">aptitude install gcc g++

aptitude install libfuse-dev libsqlite3-dev libavcodec-dev libavformat-dev libswresample-dev libavutil-dev libswscale-dev
</pre><p>To get DVD support: </p><pre class="fragment">aptitude install libdvdread-dev libdvdnav-dev
</pre><p>To get Bluray support: </p><pre class="fragment">aptitude install libbluray-dev
</pre><p>On Ubuntu use the same command with <code>apt-get</code> in place of <code>aptitude</code>.</p>
<p><b>On Suse</b> (please read notes before continuing): </p><pre class="fragment">zypper install gcc gcc-c++

zypper install fuse-devel libsqlite3-devel libavcodec-devel libavformat-devel libswresample-devel libavutil-devel libswscale-devel
</pre><p>To get DVD support: </p><pre class="fragment">zypper install libdvdread-devel libdvdnav-devel
</pre><p>To get Bluray support: </p><pre class="fragment">zypper install libbluray-devel
</pre><p>Suse includes non-proprietary codecs with FFmpeg only, namely mp3, AAC and H264 are <em>not</em> available which renders this library next to usesless. But FFmpeg can be built from source, see <a href="https://trac.ffmpeg.org/wiki/CompilationGuide">https://trac.ffmpeg.org/wiki/CompilationGuide</a> and check "FFmpeg compile notes" below.</p>
<p><b>On Red Hat:</b> </p><pre class="fragment">yum install gcc g++

yum install fuse-devel sqlite-devel
</pre><p>To get DVD support: </p><pre class="fragment">yum install libdvdread-devel libdvdnav-devel
</pre><p>To get Bluray support: </p><pre class="fragment">yum install libbluray-devel
</pre><p>Red Hat does not provide FFmpeg from its repositories. It must be built from source code, see this guide: <a href="https://trac.ffmpeg.org/wiki/CompilationGuide/Centos">https://trac.ffmpeg.org/wiki/CompilationGuide/Centos</a></p>
<p>If you want to build the documentation you will find "asciidoc" missing from the Red Hat repositories. To get it use a beta repository: </p><pre class="fragment">yum --enablerepo=rhel-7-server-optional-beta-rpms install asciidoc
</pre><p><b>On Funtoo Linux:</b></p>
<p>To get fuse suppprt and chromaprint (for make check): </p><pre class="fragment">emerge sys-fs/fuse
emerge media-libs/chromaprint
</pre><p>To get FFmpeg with H264 etc. support, specify some "USE flags" when doing emerge:</p>
<p>Create file /etc/portage/package.use, e.g. "vi vi /etc/portage/package.use" and add this line: </p><pre class="fragment">media-video/ffmpeg mp3 x264 opus vorbis vpx
</pre><p>This will enable H264, mp3, Opus and WebM support. Next... </p><pre class="fragment">emerge media-libs/openh264
emerge media-sound/twolame

emerge media-video/ffmpeg
</pre><p>to build ffmpeg.</p>
<p>FFmpeg compile notes:</p>
<p>FFmpeg must be built with at least libx264, libfdk_aac and libmp3lame support. Other libraries, e.g. ogg, Windows Media or FLAC must be added when these formats should be used as source.</p>
<h2>Installation </h2>
<p>FFmpegfs uses the GNU build system. If you are installing from git, you'll need to first run: </p><pre class="fragment">./autogen.sh
</pre><p>If you are downloading a release, this has already been done for you. To build and install, run: </p><pre class="fragment">./configure
make
make install
</pre><p>To build and run the check suite, do: </p><pre class="fragment">make checks
</pre><p>This will test audio conversion, tagging and size prediction.</p>
<p>NOTE: Image embedding is not yet implemented. The test has been disabled at the moment.</p>
<h2>Documentation </h2>
<p>The help can be created in doc or html format by running </p><pre class="fragment">make help-pdf
make help-html
</pre><p>respectively.</p>
<h2>Trouble Shooting </h2>
<p>If you run into this "ERROR: libmp3lame &gt;= 3.98.3 not found" although you have built and installed libmp3lame you may find a solution here: <a href="https://stackoverflow.com/questions/35937403/error-libmp3lame-3-98-3-not-found">https://stackoverflow.com/questions/35937403/error-libmp3lame-3-98-3-not-found</a></p>
<p><b>If you run into this error:</b> </p><pre class="fragment">Running autoreconf --install
configure.ac:46: error: possibly undefined macro: AC_DEFINE
  If this token and others are legitimate, please use m4_pattern_allow.
  See the Autoconf documentation.
autoreconf: /usr/bin/autoconf failed with exit status: 1
</pre><p>You are probably missing out on pkg-config, either it is not installed or not in path. "apt-get install pkg-config" (on Debian or equivalent on other Linux distributions) should help.</p>
<p><b>If the videotag.php script does not work under PHP7</b></p>
<p>The script runs fine under PHP5, but when upgrading to PHP7 (or using PHP7) it suddenly stops showing the list of files.</p>
<p>Check the Apache2 error.log, you might see this:</p>
<p>"PHP Fatal error:  Uncaught Error: Call to undefined function utf8_encode() in index.php"</p>
<p>This is because for some reason utf8_encode() has been moved to the XML library. Just do (or similar): </p><pre class="fragment">aptitude install php7.0-xml
systemctl restart apache2
</pre><p>And your troubles should be gone.</p>
<p>On Ubuntu use the same command with <code>apt-get</code> in place of <code>aptitude</code>.</p>
<p>**"make check": all audio checks fail**</p>
<p>Logfiles contain "bc: command not found", so the command line communicator is missing.</p>
<p>Fix by installing it (or similar): </p><pre class="fragment"> aptitude install bc
</pre><p>On Ubuntu use the same command with <code>apt-get</code> in place of <code>aptitude</code>.</p>
<p><b>Songs get cut short</b></p>
<p>If songs do not play to the very end and you are using SAMBA or NFS you're in trouble.</p>
<p>Happens when the files are transcoded on the fly, but never when file comes from cache. This is because the result is never exactly what was predicted.</p>
<p>SAMBA fills files with zeroes if the result is smaller, or cuts off the rest if the file ist larger than predicted.</p>
<p>NFS arbitrarily sends the correct file, or one that is cut or padded like SAMBA. This can be repeated as many times as one wants to - once the file is OK, once not.</p>
<p>As of yet there seems to be no way around that. Maybe NFS or SAMBA can be configured to cope with that, but how to is unknown to me.</p>
<p><b>Make reports "/bin/sh: a2x: command not found"</b></p>
<p>You are missing out on asciidoc, to install do (or similar) </p><pre class="fragment"> aptitude install asciidoc
</pre><p>should fix it.</p>
<p><b>libbluray fails to load libbluray.jar</b></p>
<p>When you see this message accessing blurays: </p><pre class="fragment">bdj.c:340: libbluray-j2se-0.9.3.jar not found.
bdj.c:466: BD-J check: Failed to load libbluray.jar
</pre><p>To get rid of this message simply install "libbluray-bdj", this will make it go away. Though not necessary, as to read the bluray tracks java support is not required, so this is simply cosmetical. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
