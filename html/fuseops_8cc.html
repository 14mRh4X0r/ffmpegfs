<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpegfs Fuse Multi Media Filesystem: src/fuseops.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpegfs Fuse Multi Media Filesystem
   &#160;<span id="projectnumber">1.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fuseops.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Fuse operations implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="transcode_8h_source.html">transcode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ffmpeg__utils_8h_source.html">ffmpeg_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cache__maintenance_8h_source.html">cache_maintenance.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="logging_8h_source.html">logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vcdparser_8h_source.html">vcdparser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dvdparser_8h_source.html">dvdparser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="blurayparser_8h_source.html">blurayparser.h</a>&quot;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;regex&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fuseops.cc:</div>
<div class="dyncontent">
<div class="center"><img src="fuseops_8cc__incl.png" border="0" usemap="#src_2fuseops_8cc" alt=""/></div>
<map name="src_2fuseops_8cc" id="src_2fuseops_8cc">
<area shape="rect" id="node2" href="transcode_8h.html" title="File transcoder interface (for use with by FUSE) " alt="" coords="191,80,281,107"/>
<area shape="rect" id="node6" href="ffmpeg__utils_8h.html" title="Various FFmpegfs utility functions. " alt="" coords="339,229,443,256"/>
<area shape="rect" id="node14" href="cache__maintenance_8h.html" title="Cache maintenance " alt="" coords="748,80,897,107"/>
<area shape="rect" id="node16" href="logging_8h.html" title="Provide various log facilities to stderr, disk or syslog. " alt="" coords="972,80,1047,107"/>
<area shape="rect" id="node21" href="vcdparser_8h.html" title="Video CD and Super Video CD parser. " alt="" coords="1121,80,1212,107"/>
<area shape="rect" id="node22" href="dvdparser_8h.html" title="DVD parser. " alt="" coords="595,229,685,256"/>
<area shape="rect" id="node23" href="blurayparser_8h.html" title="Bluray disk parser. " alt="" coords="467,229,571,256"/>
<area shape="rect" id="node3" href="ffmpegfs_8h.html" title="Main include for FFmpegfs project. " alt="" coords="194,155,278,181"/>
<area shape="rect" id="node12" href="fileio_8h.html" title="FileIO class. " alt="" coords="78,229,138,256"/>
<area shape="rect" id="node7" href="ffmpeg__compat_8h.html" title="FFmpeg API compatibility. " alt="" coords="109,304,232,331"/>
</map>
</div>
</div>
<p><a href="fuseops_8cc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a48dd1b588b6080267a2c6d4c602699d2"><td class="memItemLeft" align="right" valign="top"><a id="a48dd1b588b6080267a2c6d4c602699d2"></a>
typedef std::map&lt; std::string, <a class="el" href="structVIRTUALFILE.html">VIRTUALFILE</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a48dd1b588b6080267a2c6d4c602699d2">filenamemap</a></td></tr>
<tr class="memdesc:a48dd1b588b6080267a2c6d4c602699d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map source file names to virtual file objects. <br /></td></tr>
<tr class="separator:a48dd1b588b6080267a2c6d4c602699d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a98fc6202ddd48ca1ad9db1b96baf9d63"><td class="memItemLeft" align="right" valign="top"><a id="a98fc6202ddd48ca1ad9db1b96baf9d63"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a98fc6202ddd48ca1ad9db1b96baf9d63">init_fuse_ops</a> (void)</td></tr>
<tr class="memdesc:a98fc6202ddd48ca1ad9db1b96baf9d63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise FUSE operation structure. <br /></td></tr>
<tr class="separator:a98fc6202ddd48ca1ad9db1b96baf9d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a412324a307b7979f30f64c5871796cf2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a412324a307b7979f30f64c5871796cf2">insert_file</a> (<a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a> type, const std::string &amp;virtfilepath, const struct stat *st)</td></tr>
<tr class="memdesc:a412324a307b7979f30f64c5871796cf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new virtual file to internal list.  <a href="#a412324a307b7979f30f64c5871796cf2">More...</a><br /></td></tr>
<tr class="separator:a412324a307b7979f30f64c5871796cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a865cdd6018a62aacf09564743e670270"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a865cdd6018a62aacf09564743e670270">insert_file</a> (<a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a> type, const std::string &amp;virtfilepath, const std::string &amp;origfile, const struct stat *st)</td></tr>
<tr class="memdesc:a865cdd6018a62aacf09564743e670270"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new virtual file to internal list.  <a href="#a865cdd6018a62aacf09564743e670270">More...</a><br /></td></tr>
<tr class="separator:a865cdd6018a62aacf09564743e670270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf06e1e660878226dfa1a1b24b626875"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#acf06e1e660878226dfa1a1b24b626875">find_file</a> (const std::string &amp;virtfilepath)</td></tr>
<tr class="memdesc:acf06e1e660878226dfa1a1b24b626875"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find file in cache.  <a href="#acf06e1e660878226dfa1a1b24b626875">More...</a><br /></td></tr>
<tr class="separator:acf06e1e660878226dfa1a1b24b626875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaccd4c147efa346efcbb3c4fbb1e0a1a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aaccd4c147efa346efcbb3c4fbb1e0a1a">check_path</a> (const std::string &amp;path)</td></tr>
<tr class="memdesc:aaccd4c147efa346efcbb3c4fbb1e0a1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if path has already been parsed. Only useful if for DVD, Bluray or VCD where it is guaranteed that all files have been parsed whenever the directory is in the hash.  <a href="#aaccd4c147efa346efcbb3c4fbb1e0a1a">More...</a><br /></td></tr>
<tr class="separator:aaccd4c147efa346efcbb3c4fbb1e0a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a757570119497576827529b07c0aa4147"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a757570119497576827529b07c0aa4147">load_path</a> (const std::string &amp;path, const struct stat *statbuf, void *buf, fuse_fill_dir_t filler)</td></tr>
<tr class="memdesc:a757570119497576827529b07c0aa4147"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a path with virtual files for FUSE.  <a href="#a757570119497576827529b07c0aa4147">More...</a><br /></td></tr>
<tr class="separator:a757570119497576827529b07c0aa4147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ad0a9782c3231049be5c9c9b22542a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a7ad0a9782c3231049be5c9c9b22542a7">find_original</a> (std::string *filepath)</td></tr>
<tr class="memdesc:a7ad0a9782c3231049be5c9c9b22542a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the destination (post-transcode) file name, determine the name of the original file to be transcoded.  <a href="#a7ad0a9782c3231049be5c9c9b22542a7">More...</a><br /></td></tr>
<tr class="separator:a7ad0a9782c3231049be5c9c9b22542a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a20127960d0a961494a0a56d119d885a9"><td class="memItemLeft" align="right" valign="top">fuse_operations&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a20127960d0a961494a0a56d119d885a9">ffmpegfs_ops</a></td></tr>
<tr class="memdesc:a20127960d0a961494a0a56d119d885a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">FUSE file system operations.  <a href="#a20127960d0a961494a0a56d119d885a9">More...</a><br /></td></tr>
<tr class="separator:a20127960d0a961494a0a56d119d885a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Fuse operations implementation. </p>
<dl class="section author"><dt>Author</dt><dd>Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2006-2008 David Collett <br />
Copyright (C) 2008-2013 K. Henriksson <br />
Copyright (C) 2017-2019 FFmpeg support by Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>

<p class="definition">Definition in file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aaccd4c147efa346efcbb3c4fbb1e0a1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaccd4c147efa346efcbb3c4fbb1e0a1a">&#9670;&nbsp;</a></span>check_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool check_path </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if path has already been parsed. Only useful if for DVD, Bluray or VCD where it is guaranteed that all files have been parsed whenever the directory is in the hash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Path to parse. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if path was found; false if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00275">275</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00498">check_bluray()</a>, <a class="el" href="dvdparser_8cc_source.html#l00553">check_dvd()</a>, and <a class="el" href="vcdparser_8cc_source.html#l00146">check_vcd()</a>.</p>

</div>
</div>
<a id="acf06e1e660878226dfa1a1b24b626875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf06e1e660878226dfa1a1b24b626875">&#9670;&nbsp;</a></span>find_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> find_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>virtfilepath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find file in cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">virtfilepath</td><td>- Virtual filename and path of file to find. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If found, returns <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition. ">VIRTUALFILE</a> object, if not found returns nullptr. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00262">262</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l01238">sanitise_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ffmpegfs_8cc_source.html#l00162">FFMPEGFS_PARAMS::current_format()</a>, and <a class="el" href="fuseops_8cc_source.html#l00337">find_original()</a>.</p>

</div>
</div>
<a id="a7ad0a9782c3231049be5c9c9b22542a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ad0a9782c3231049be5c9c9b22542a7">&#9670;&nbsp;</a></span>find_original()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> find_original </td>
          <td>(</td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>filepath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given the destination (post-transcode) file name, determine the name of the original file to be transcoded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">filepath</td><td>- Input the original file, output name of transcoded file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns contstant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition. ">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00337">337</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00290">find_ext()</a>, <a class="el" href="fuseops_8cc_source.html#l00262">find_file()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00199">FFmpegfs_Format::format_name()</a>, <a class="el" href="ffmpegfs_8h_source.html#l00125">FFMPEGFS_PARAMS::m_format</a>, <a class="el" href="fileio_8h_source.html#l00079">VIRTUALFILE::m_origfile</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00075">params</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00248">remove_filename()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01238">sanitise_name()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00126">FFMPEGFS_PARAMS::smart_transcode()</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l01107">strcasecmp()</a>.</p>

</div>
</div>
<a id="a412324a307b7979f30f64c5871796cf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a412324a307b7979f30f64c5871796cf2">&#9670;&nbsp;</a></span>insert_file() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> insert_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>virtfilepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add new virtual file to internal list. </p>
<p>For Bluray/DVD/VCD actually no physical input file exists, so virtual file and origfile are the same.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>- Type of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">virtfilepath</td><td>- Name of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">st</td><td>- stat buffer with file size, time etc. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns constant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition. ">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00240">240</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

</div>
</div>
<a id="a865cdd6018a62aacf09564743e670270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a865cdd6018a62aacf09564743e670270">&#9670;&nbsp;</a></span>insert_file() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> insert_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>virtfilepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>origfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add new virtual file to internal list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>- Type of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">virtfilepath</td><td>- Name of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">origfile</td><td>- Original file name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">st</td><td>- stat buffer with file size, time etc. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns constant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition. ">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00245">245</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpegfs_8cc_source.html#l00131">FFMPEGFS_PARAMS::guess_format_idx()</a>, <a class="el" href="fileio_8h_source.html#l00078">VIRTUALFILE::m_format_idx</a>, <a class="el" href="fileio_8h_source.html#l00079">VIRTUALFILE::m_origfile</a>, <a class="el" href="fileio_8h_source.html#l00080">VIRTUALFILE::m_st</a>, <a class="el" href="fileio_8h_source.html#l00076">VIRTUALFILE::m_type</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00075">params</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l01238">sanitise_name()</a>.</p>

</div>
</div>
<a id="a757570119497576827529b07c0aa4147"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a757570119497576827529b07c0aa4147">&#9670;&nbsp;</a></span>load_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int load_path </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>statbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a path with virtual files for FUSE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Physical path to load. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">statbuf</td><td>- stat buffer to load. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>- FUSE buffer to fill. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filler</td><td>- Filler function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns number of files found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00282">282</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00345">get_destname()</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l00263">remove_path()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a20127960d0a961494a0a56d119d885a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20127960d0a961494a0a56d119d885a9">&#9670;&nbsp;</a></span>ffmpegfs_ops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fuse_operations ffmpegfs_ops</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FUSE file system operations. </p>
<p>Fuse operations struct. </p>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00083">83</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
